<html>

    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/normalize.css" type="text/css" media="screen">
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
        <script src="js/menu.js"></script>
        <title>AJAX Requesting</title>

        <script>
            function getAllAjaxInfo(){
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var out="";
                        var content = JSON.parse(this.responseText);
                        for(var i=0; i<content.cars.length;i++){
                                out += 'Make: ' + content.cars[i].Make + ' Model and Year: ' + content.cars[i].Model + '<br>';
                        }

                        document.getElementById("response").innerHTML = out;
                }
                };
                xhttp.open("GET", "https://api.myjson.com/bins/y817m", true);
                xhttp.send(); 
            }

            function getAjaxInfoByYear(){
                var year = document.getElementById("year").value;
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var out="";
                        var content = JSON.parse(this.responseText);
                        for(var i=0; i<content.cars.length;i++){
                            if(year == content.cars[i].Year){
                                out += 'Make: ' + content.cars[i].Make + ' Model and Year: ' + content.cars[i].Model + '<br>';
                            }
                        }

                        document.getElementById("response").innerHTML = out;
                }
                };
                xhttp.open("GET", "https://api.myjson.com/bins/y817m", true);
                xhttp.send(); 
            }
        </script>
    </head>
        
    <body>   
        <!-- Menu -->         
        <div class="body-index">           
            <nav id="page-nav">  
                <div class="menu">
                    <ul>
                        <li class="submenu"><a href="loops.html" title="Loops"><span class="first">Loops!</span>Loops and Arrays</a>
                            <ul class="children">
                                <li><a href="loops.html" title="Images">Loops and Arrays</a></li>
                                <li><a href="ajax-requesting.html" title="Ajax Requesting">Ajax Requesting</a></li>
                                <li><a href="dom-manipulating.html" title="DOM Manipulating">DOM Manipulating</a></li>
                            </ul>
                        </li>
                        <li class="submenu"><a href="" title="HTML5 & CSS"><span class="third">HTML5 & CSS!</span>HTML5 & CSS</a>
                            <ul class="children">
                                <li><a href="images.html" title="Images">Images and Sounds</a></li>
                                <li><a href="videos.html" title="Videos">Videos</a></li>
                                <li><a href="canvas.html" title="Canvas">Canvas</a></li>
                                <li><a href="css-triggering.html" title="CSS Triggering">CSS Triggering</a></li>
                                <li><a href="css-transformation.html" title="Power Chords">CSS Transformation</a></li>
                                <li><a href="css-animation.html" title="CSS Animation">CSS Animation</a></li>
                            </ul>
                        </li>  
                        <li><a href="index.html" title="Index"><span class="second">Index!</span>Index</a></li>      
                        <li><a href="local-storage.html" title="Local Storage"><span class="forth">Local Storage!</span>Local Storage</a></li>
                        <li><a href="json.html" title="JSON"><span class="second">JSON!</span>JSON</a></li>
                        <li><a href="objects.html" title="Objects"><span class="fifth">Objects!</span>Objects</a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <!-- Menu Finish -->   
        
        <div class="divElement">
            <input id="year" type="text"><br><br>
            <button class="button" onclick="getAjaxInfoByYear()">get cars by year!</button><br><br>
            <button class="button" onclick="getAllAjaxInfo()">get all the cars!</button><br><br><br>
            <p class="transbox" id="response"></p>
        </div>        
    </body>
    
    <footer>
        <div class="foot">    
            <div class="footer"> 
                <p>The images are from <a href="https://www.pexels.com/search/programming/">pexels.com</a> <a href="https://www.pexels.com/photo-license/">Â®</a></p>                             
                <div class="scr">
                    <script>
                        document.write("This page was last modified on: " + document.lastModified +"");
                    </script>
                </div>
            </div>
        </div>
    </footer>

</html>